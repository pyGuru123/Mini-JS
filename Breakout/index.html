<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Breakout</title>
	<style type="text/css">
		html, body {
			margin: 0;
			padding: 0;
			background: rgb(72, 72, 72);
		}

		canvas {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			background: #eee;
			border: 1.3px solid rgba(0, 0, 255, 0.5);
		}
	</style>
</head>
<body>
	<canvas width='288' height='512'></canvas>

	<script type="text/javascript">
		const canvas = document.querySelector('canvas');
		const ctx = canvas.getContext('2d');

		const WIDTH = canvas.width;
		const HEIGHT = canvas.height;

		let colors = ['#FAAB1C', '#2490E9','#E46E63', '#6C757D', '#75D5FD',
			  '#32A956', '#367055']
		let length = colors.length
		var color = get_color();

		var x = WIDTH / 2;
		var y = HEIGHT / 2;
		var radius = 10;
		var ball = new Ball(x, y, radius);

		var paddleWidth = 80;
		var paddleHeight = 10;
		var paddle = new Paddle(paddleWidth, paddleHeight);

		// Canvas Update function

		function updateCanvas() {
			ctx.clearRect(0, 0, WIDTH, HEIGHT);
			ball.draw();
			ball.update();
			paddle.draw();
		}

		setInterval(updateCanvas, 10);
		document.addEventListener('keydown', keyDown);
		document.addEventListener('keyup', keyUp);

		// Game Objects

		function Ball(x, y, radius) {
			this.x = x;
			this.y = y;
			this.radius = radius;

			this.dx = 2;
			this.dy = -2;

			this.draw = () => {
				ctx.beginPath();
				ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);
				ctx.fillStyle = color;
				ctx.fill();
				ctx.stroke();
				ctx.closePath();
			}

			this.update = () => {
				this.x += this.dx;
				this.y += this.dy;

				if (this.y + this.dy < this.radius || this.y + this.dy > HEIGHT - this.radius) {
					this.dy *= -1;
				}
				if (this.x + this.dx < this.radius || this.x + this.dx > WIDTH - this.radius) {
					this.dx *= -1
				}
			}
		}

		function Paddle(width, height) {
			this.width = width;
			this.height = height;

			this.x = WIDTH / 2 - this.width / 2;
			this.y = HEIGHT - this.height;
			this.speed = 8;
			this.moveLeft = false;
			this.moveRight = false;

			this.draw = () => {
				ctx.beginPath();
				ctx.rect(this.x, this.y, this.width, this.height);
				ctx.fillStyle = color;
				ctx.fill();
				ctx.stroke();
				ctx.closePath();
			}

			this.update = () => {
				if (this.moveLeft) {
					this.x -= this.speed;
				}

				if (this.moveRight) {
					this.x += this.speed;
				}
			}
		}

		// Functions & Event Handlers

		function keyDown(event) {
			if (event.key == 'ArrowLeft') {
				paddle.moveLeft = true;
			}

			else if (event.key == 'ArrowRight') {
				paddle.moveRight = true;
			}

			paddle.update();
		}

		function keyUp(event) {
			if (event.key == 'ArrowLeft') {
				paddle.moveLeft = false;
			}

			else if (event.key == 'ArrowRight') {
				paddle.moveRight = false;
			}
			paddle.update();
		}

		function get_color() {
			let index = Math.floor(Math.random() * length) + 1;
			color = colors[index];
			return color;
		}
	</script>
</body>
</html>